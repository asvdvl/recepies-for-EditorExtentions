
# Автогенерируемые рецепты для мода Editor Extensions

> в данный момент может быть не стабилным, буду благодарен если вы отпишетесь мне об ошибках

## Цели(и ограничения для меня):
- динамически, не используя "хардкодинг":
> совсем не получилось, в моде есть 3 из 27 рецепта с хардкодом: линкованый конвеер с сундуком(частично) и очки ночного зрения(полностью)
  - генерирование рецептов предметов основываясь на их "характеристиках"
  - генерирование рецепта модулей с использованием комбинаторной оптимизации
  - удовлетворять ситуации когда креативный предмет не требует энергии но должен

- не переписывать любую логику Editor Extensions за исключением в data.raw.recipe["recipe"] полей:
	- ingredients - ингридиенты рецепта
	- energy_required - очень странное имя для переменной отвечающей за продолжительность крафта, изменяется только в случае если невозможно поместить требуемое количество ингридиентов в верхнее поле(ограничения движка или пользовательских настроек)

- динамическая интеграция в дерево технологий
	- предметы должны иметь зависимость от ингридиентов в крафте
	- от зависимостей строятся количество каждой науки, общее количество наук и время изучения(все это является суммой этих же параметров у "родителя")

- интеграция в ассемблеры

## Но...зачем? Почему бы просто не прописать рецепты руками?
 1. это челленжд который я поставил сам себе
 2. мне не прийдется добавлять совместимость с каждым модом, то что я написал должно самостоятельно найти все что нужно для создания рецептов
 3. узнать о "веселых" особенностях моддинга и игры
 4. это было интересно програмировать

## Протестированно с модами, и по крайней мере игра запускается:
- more-module-tiers
- RampantArsenal
- UltimateBelts
- Big_Brother
  - рецепт скорее всего не меняется
- моды Hiladdar
- micro-machines
  - поддержка крафта в них
- моды Schall
- Space Exploration
  - запустилось не сразу, но фикс оказался забавным, я просто переименовал data-update в data-final-fixes, так же все модули кроме скорости отключены изза превышающих характерискик, можно исправить в настройках в ручную указав нужные модули и включив принудительное применение указанных предметов. хотя если этот мод нужен не только мне то я пофикшу это.

## Алгоритмы генерации

## Галерея
<details>
<summary>list</summary>

![рецепты](/gallery/recipes.png)
![cвязанный сундук](/gallery/linked-chest.png)

</details>

## Включенные предметы и комментарии к балансу:
<details>
<summary>Список:</summary>

- Связанный конвейер
  - логика очень проста, представим что в грузовой вагон вставили электродвигатель и он теперь ездит под землей, если бы не условие что я не буду изменять код EE то я бы заставил игрока положить внутрь конвееров, равных расстоянию меж 2 точек, но я уже и так разрабатываю мод месяц. 

- Связанный сундук
  - эти 2 предмета как можно заметить взаимосвязаны, для меня это логично. как я упомянул в defines.lua я должен был поставить 32 подземных(посмотрите скриншоты), но в этом случае проще накопить на грузовых дронов(на тот момент разработки, без изменения времени крафта и реакторов)

- эти предметы "обычные", исходя из заданых параметров подобрали лучший предмет с максимально подходящими статами но не превшающими их, так же удовлетворили отсутствие электроэнергии через добавление реатора, требуемое количество реакторов посчитано через максимальное потребление у предметов в ингридиенах
  - Супер манипулятор
  - Супер локомотив
  - Супер помпа
  - Супер опора ЛЭП
  - Супер подстанция
  - Супер энергетический щит
  - Супер экзоскелет
  - Супер персональная дронстанция
  - Супер дронстанция
  - Супер лаборатория
  - Супер радар
  - Супер маяк

- этот рецепт просто зашардхожен, у меня нет идей как его "динамически" генерировать
  - Супер прибор ночного видения

- и мы подходим к той части которую я считаю самой интересной для меня и из-за которой я начал писать этот мод, модули. суть проста, из EE у нас есть крутые модули с характеристиками по 250% алгоритм берет топовые модули и пытается "погасить" это требование, например, для скорости в 250% нам нужны 5 модулей скорости, но модули скорости приносят не только скорость а еще и уменьшение эффективности, и что бы уменьшение эффективности свести к 0 мы берем 7 модулей эффективности. это самый простой пример ведь есть модуль продуктивности, не говоря уже про бесполезные модули которые вредят а не помогают, так же время крафта это двойное время от топ модуля
  - Супер модуль скорости
  - Супер модуль эффективности
  - Супер модуль продуктивности
  - Супер модуль замедления
  - Супер модуль неэффективности
  - Супер модуль загрязнения
  - Супер модуль чистоты
    - отдельное замечание, т.к. в игре нет модулей уменьшающих загрязнение то берется оно из "резервной" таблицы, в данном случае это дерево что по мне логично, это поведение меняется в настройках, как и другие резервные эффекты

- отдельная категория "сверхвыделившихся" игра имеет лимит по рецептам в 65к, поэтому что бы это компенсировать я остатки которые не поместились перенес в время крафта, 1 недостающий предмет == 1 секунда, в итоге предметы невозможно скрафтить, кроме дронов, но я их оставил, наверняка найдутся индивидуумы у которых есть еще более читерные предметы _ну или вы найдете настройку которая делит это время_
  - Супер топливо
  - Бесконечный портативный термоядерный реактор
  - Супер строительный дрон
  - Супер транспортный дрон
  - Супер персональная батарея
</details>